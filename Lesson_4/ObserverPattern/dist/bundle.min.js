(()=>{let e=new class{constructor(){this._currentSpeed=0,this.speedObservers=[]}subscribeSpeedObserver(e){if(!e.notify)throw new Error("Invalid observer. Notify implementation missing");this.speedObservers.push(e)}unsuscribeSpeedObserver(e){let r=this.speedObservers.indexOf(e);r>0&&this.speedObservers.splice(r,0)}notifySpeedObserver(e,r){for(let t of this.speedObservers)t.notify(e,r)}get currentSpeed(){return this._currentSpeed}set currentSpeed(e){let r=this._currentSpeed;this._currentSpeed=e,this._currentSpeed!=r&&this.notifySpeedObserver(this._currentSpeed,r)}},r=new class{notify(e,r){console.log(`Current Speed changed from ${r} to ${e}`)}},t=new class{constructor(e){this.textField=document.querySelector(e)}notify(e,r){this.textField.textContent=e}}("#speedometer");e.subscribeSpeedObserver(r),e.subscribeSpeedObserver(t);let s=setInterval((()=>{e.currentSpeed+=10}),2e3);setTimeout((()=>{clearInterval(s)}),1e4)})();
